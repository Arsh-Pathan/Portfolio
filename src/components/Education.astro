---
const education = [
  {
    institution: "Dhole Patil College of Engineering, Pune",
    degree: "B.E. in Computer Engineering",
    period: "2023 - Present",
    status: "Current",
    icon: "üéì",
  },
  {
    institution: "Padmashri Vikhe Patil College, Pravaranagar",
    degree: "11th - 12th Grade",
    period: "2021 - 2023",
    status: "Completed",
    icon: "üìö",
  },
  {
    institution: "Shree Saibaba English Medium School, Shirdi",
    degree: "5th - 10th Grade",
    period: "2016 - 2021",
    status: "Completed",
    icon: "üè´",
  },
  {
    institution: "Preetisudhaji English Medium School, Rahata",
    degree: "KG - 4th Grade",
    period: "2011 - 2016",
    status: "Completed",
    icon: "üéí",
  },
];
---

<section
  id="education"
  class="section education-section relative overflow-hidden"
>
  <div class="container relative z-10">
    <div class="text-center mb-16">
      <div class="section-label justify-center flex">Background</div>
      <h2 class="section-title">
        Education <span class="gradient-text">History</span>
      </h2>
    </div>

    <div class="timeline max-w-3xl mx-auto relative">
      <!-- Vertical line -->
      <div class="timeline-line"></div>

      {
        education.map((edu, index) => (
          <div class="timeline-item" data-index={index}>
            <div class="timeline-dot-wrapper">
              <div
                class={`timeline-dot ${edu.status === "Current" ? "dot-active" : "dot-done"}`}
              >
                <span class="text-lg">{edu.icon}</span>
              </div>
            </div>

            <div
              class={`timeline-card glass ${index % 2 === 0 ? "card-left" : "card-right"}`}
            >
              <div class="card-period">
                <span class="period-text">{edu.period}</span>
                <span
                  class={`status-badge ${edu.status === "Current" ? "badge-active" : "badge-done"}`}
                >
                  {edu.status}
                </span>
              </div>
              <h3 class="card-institution">{edu.institution}</h3>
              <p class="card-degree">{edu.degree}</p>
            </div>
          </div>
        ))
      }
    </div>
  </div>

  <div class="edu-blob blob-1"></div>
  <div class="edu-blob blob-2"></div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // Title animations
    gsap.from(".education-section .section-label", {
      scrollTrigger: { trigger: ".education-section", start: "top 80%" },
      y: 30,
      opacity: 0,
      filter: "blur(8px)",
      duration: 0.8,
      ease: "power3.out",
    });

    gsap.from(".education-section .section-title", {
      scrollTrigger: { trigger: ".education-section", start: "top 80%" },
      y: 40,
      opacity: 0,
      filter: "blur(10px)",
      duration: 1,
      delay: 0.15,
      ease: "power3.out",
    });

    // Timeline line grows
    gsap.from(".timeline-line", {
      scrollTrigger: { trigger: ".timeline", start: "top 85%" },
      scaleY: 0,
      transformOrigin: "top center",
      duration: 1.5,
      ease: "power2.out",
    });

    // Timeline items stagger in
    const items = document.querySelectorAll(".timeline-item");
    items.forEach((item, index) => {
      const card = item.querySelector(".timeline-card");
      const dot = item.querySelector(".timeline-dot-wrapper");
      const isLeft = index % 2 === 0;

      gsap.from(dot, {
        scrollTrigger: {
          trigger: item,
          start: "top 85%",
          toggleActions: "play none none reverse",
        },
        scale: 0,
        opacity: 0,
        duration: 0.5,
        ease: "back.out(1.7)",
      });

      gsap.from(card, {
        scrollTrigger: {
          trigger: item,
          start: "top 85%",
          toggleActions: "play none none reverse",
        },
        x: isLeft ? -60 : 60,
        opacity: 0,
        filter: "blur(6px)",
        duration: 0.7,
        delay: 0.2,
        ease: "power3.out",
      });
    });
  });
</script>

<style>
  .education-section {
    background: linear-gradient(180deg, #0a0f1c, #0d1427);
    padding: 8rem 0;
    color: white;
  }

  .timeline {
    position: relative;
  }

  .timeline-line {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, #3b82f6, rgba(59, 130, 246, 0.1));
    transform: translateX(-50%);
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
  }

  .timeline-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 3rem;
    position: relative;
  }

  .timeline-item:nth-child(odd) {
    flex-direction: row;
  }

  .timeline-item:nth-child(even) {
    flex-direction: row-reverse;
  }

  .timeline-dot-wrapper {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
  }

  .timeline-dot {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #111a2e;
    border: 2px solid #3b82f6;
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
    transition: all 0.3s ease;
  }

  .dot-active {
    border-color: #06b6d4;
    box-shadow:
      0 0 30px rgba(6, 182, 212, 0.3),
      0 0 60px rgba(6, 182, 212, 0.1);
  }

  .timeline-card {
    width: calc(50% - 40px);
    padding: 1.5rem 2rem;
    transition: all 0.3s ease;
  }

  .card-left {
    margin-right: auto;
    text-align: right;
  }

  .card-right {
    margin-left: auto;
    text-align: left;
  }

  .card-period {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }

  .card-left .card-period {
    justify-content: flex-end;
  }

  .period-text {
    font-size: 0.85rem;
    font-weight: 600;
    color: #60a5fa;
    letter-spacing: 0.02em;
  }

  .status-badge {
    font-size: 0.65rem;
    padding: 0.15rem 0.6rem;
    border-radius: 999px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .badge-active {
    background: rgba(6, 182, 212, 0.15);
    color: #06b6d4;
    border: 1px solid rgba(6, 182, 212, 0.3);
  }

  .badge-done {
    background: rgba(100, 116, 139, 0.15);
    color: #94a3b8;
    border: 1px solid rgba(100, 116, 139, 0.2);
  }

  .card-institution {
    font-size: 1.15rem;
    font-weight: 700;
    color: #e8edf5;
    margin-bottom: 0.3rem;
    transition: color 0.3s;
  }

  .timeline-card:hover .card-institution {
    color: #60a5fa;
  }

  .card-degree {
    font-size: 0.95rem;
    color: #7a8ba8;
  }

  /* Ambient blobs */
  .edu-blob {
    position: absolute;
    border-radius: 50%;
    filter: blur(120px);
    pointer-events: none;
    z-index: 0;
  }

  .edu-blob.blob-1 {
    width: 450px;
    height: 450px;
    background: radial-gradient(
      circle,
      rgba(59, 130, 246, 0.06),
      transparent 70%
    );
    top: 20%;
    right: -10%;
  }

  .edu-blob.blob-2 {
    width: 350px;
    height: 350px;
    background: radial-gradient(
      circle,
      rgba(129, 140, 248, 0.05),
      transparent 70%
    );
    bottom: 10%;
    left: -5%;
  }

  @media (max-width: 768px) {
    .education-section {
      padding: 5rem 0;
    }

    .timeline-line {
      left: 22px;
    }

    .timeline-dot-wrapper {
      left: 22px;
    }

    .timeline-item,
    .timeline-item:nth-child(even) {
      flex-direction: row;
      padding-left: 60px;
    }

    .timeline-card {
      width: 100%;
      text-align: left;
    }

    .card-left,
    .card-right {
      margin: 0;
      text-align: left;
    }

    .card-left .card-period {
      justify-content: flex-start;
    }
  }
</style>
