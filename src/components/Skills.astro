---
const skillCategories = [
  {
    title: "Languages",
    color: "#3b82f6",
    skills: [
      {
        name: "JavaScript",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg",
      },
      {
        name: "TypeScript",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg",
      },
      {
        name: "Python",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg",
      },
      {
        name: "Java",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg",
      },
      {
        name: "Kotlin",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/kotlin/kotlin-original.svg",
      },
      {
        name: "C",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/c/c-original.svg",
      },
    ],
  },
  {
    title: "Frontend & 3D",
    color: "#06b6d4",
    skills: [
      {
        name: "React",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg",
      },
      {
        name: "Astro",
        logo: "https://astro.build/assets/press/astro-icon-light.svg",
      },
      {
        name: "Three.js",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/threejs/threejs-original.svg",
      },
      {
        name: "Tailwind CSS",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/tailwindcss/tailwindcss-original.svg",
      },
    ],
  },
  {
    title: "Backend & Database",
    color: "#818cf8",
    skills: [
      {
        name: "Node.js",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg",
      },
      {
        name: "Express",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/express/express-original.svg",
      },
      {
        name: "PostgreSQL",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg",
      },
      {
        name: "MySQL",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg",
      },
      {
        name: "MongoDB",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mongodb/mongodb-original.svg",
      },
      {
        name: "Firebase",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/firebase/firebase-plain.svg",
      },
      {
        name: "GraphQL",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/graphql/graphql-plain.svg",
      },
    ],
  },
  {
    title: "Tools & DevOps",
    color: "#34d399",
    skills: [
      {
        name: "Git",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg",
      },
      {
        name: "GitHub",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg",
      },
      {
        name: "VS Code",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg",
      },
      {
        name: "Docker",
        logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg",
      },
    ],
  },
];
---

<section id="skills" class="section skills-section relative overflow-hidden">
  <div class="container mx-auto px-4 relative z-10">
    <div class="text-center mb-16">
      <div class="section-label justify-center flex">Technical Skills</div>
      <h2 class="section-title">
        What I <span class="gradient-text">Work With</span>
      </h2>
    </div>

    <div class="skills-grid">
      {
        skillCategories.map((category, catIndex) => (
          <div class="skill-category-card glass" data-cat={catIndex}>
            <div class="cat-header">
              <div
                class="cat-dot"
                style={`background: ${category.color}; box-shadow: 0 0 15px ${category.color}50;`}
              />
              <h3 class="cat-title" style={`color: ${category.color};`}>
                {category.title}
              </h3>
            </div>
            <div class="skill-items">
              {category.skills.map((skill, skillIndex) => (
                <div class="skill-item" data-skill={skillIndex}>
                  <div class="skill-icon-wrap">
                    <img
                      src={skill.logo}
                      alt={skill.name}
                      class="skill-icon"
                      loading="lazy"
                    />
                  </div>
                  <span class="skill-name">{skill.name}</span>
                </div>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </div>

  <!-- Ambient blobs -->
  <div class="skills-blob blob-1"></div>
  <div class="skills-blob blob-2"></div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // Section title animation
    gsap.from(".skills-section .section-label", {
      scrollTrigger: { trigger: ".skills-section", start: "top 80%" },
      y: 30,
      opacity: 0,
      filter: "blur(8px)",
      duration: 0.8,
      ease: "power3.out",
    });

    gsap.from(".skills-section .section-title", {
      scrollTrigger: { trigger: ".skills-section", start: "top 80%" },
      y: 40,
      opacity: 0,
      filter: "blur(10px)",
      duration: 1,
      delay: 0.15,
      ease: "power3.out",
    });

    // Stagger cards in
    gsap.from(".skill-category-card", {
      scrollTrigger: { trigger: ".skills-grid", start: "top 85%" },
      y: 60,
      opacity: 0,
      scale: 0.95,
      filter: "blur(6px)",
      duration: 0.8,
      stagger: 0.15,
      ease: "power3.out",
    });

    // Stagger skill items inside each card
    document.querySelectorAll(".skill-category-card").forEach((card) => {
      const items = card.querySelectorAll(".skill-item");
      gsap.from(items, {
        scrollTrigger: { trigger: card, start: "top 80%" },
        x: -20,
        opacity: 0,
        duration: 0.5,
        stagger: 0.06,
        delay: 0.4,
        ease: "power2.out",
      });
    });

    // Hover magnetic effect on skill items
    document.querySelectorAll(".skill-item").forEach((item) => {
      item.addEventListener("mouseenter", () => {
        gsap.to(item, { scale: 1.08, duration: 0.3, ease: "power2.out" });
      });
      item.addEventListener("mouseleave", () => {
        gsap.to(item, { scale: 1, duration: 0.3, ease: "power2.out" });
      });
    });
  });
</script>

<style>
  .skills-section {
    background: linear-gradient(180deg, #1e293b, #0d1427 40%, #0a0f1c);
    padding: 8rem 0;
  }

  .skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    max-width: 1100px;
    margin: 0 auto;
  }

  .skill-category-card {
    padding: 2rem;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .skill-category-card:hover {
    transform: translateY(-6px);
    box-shadow:
      0 20px 50px rgba(0, 0, 0, 0.4),
      0 0 40px rgba(59, 130, 246, 0.06);
  }

  .cat-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }

  .cat-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .cat-title {
    font-size: 1.1rem;
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  .skill-items {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }

  .skill-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.6rem 0.8rem;
    border-radius: 0.75rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid transparent;
    transition: all 0.3s ease;
    cursor: default;
  }

  .skill-item:hover {
    background: rgba(59, 130, 246, 0.06);
    border-color: rgba(59, 130, 246, 0.15);
  }

  .skill-icon-wrap {
    width: 32px;
    height: 32px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .skill-icon {
    width: 24px;
    height: 24px;
    filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.2));
  }

  .skill-name {
    font-size: 0.9rem;
    font-weight: 500;
    color: #c8d6e5;
  }

  /* Ambient blobs */
  .skills-blob {
    position: absolute;
    border-radius: 50%;
    filter: blur(120px);
    pointer-events: none;
    z-index: 0;
  }

  .skills-blob.blob-1 {
    width: 500px;
    height: 500px;
    background: radial-gradient(
      circle,
      rgba(59, 130, 246, 0.08),
      transparent 70%
    );
    top: 10%;
    left: -10%;
  }

  .skills-blob.blob-2 {
    width: 400px;
    height: 400px;
    background: radial-gradient(
      circle,
      rgba(6, 182, 212, 0.06),
      transparent 70%
    );
    bottom: 10%;
    right: -5%;
  }

  @media (max-width: 768px) {
    .skills-section {
      padding: 5rem 0;
    }
    .skills-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
